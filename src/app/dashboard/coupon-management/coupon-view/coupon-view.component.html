<div class="card dashboard-card">
  <div class="card-header">
    <div class="d-flex justify-content-between">
      <button
        class="btn btn-sm btn-outline-dark"
        (click)="couponManagementService.toggleAdd()"
      >
        ‚ûï Agregar
      </button>
      <button
        class="btn btn-sm btn-outline-primary"
        (click)="
          couponManagementService.update(couponManagementService.selectedCoupon)
        "
      >
        üîÑ Modificar
      </button>
      <button
        class="btn btn-sm btn-outline-danger"
        (click)="
          couponManagementService.delete(couponManagementService.selectedCoupon)
        "
      >
        ‚ùå Eliminar
      </button>
    </div>
  </div>
  <div class="card-body">
    <ng-container *ngIf="!couponManagementService.selectedCoupon">
      Seleccione un cup√≥n existente de la grilla de la izquierda
    </ng-container>
    <ng-container *ngIf="couponManagementService.selectedCoupon">
      <p>
        <strong>ID:</strong>
        {{ couponManagementService.selectedCoupon.id }}
      </p>
      <p>
        <strong>T√≠tulo:</strong>
        {{ couponManagementService.selectedCoupon.title }}
      </p>
      <p>
        <strong>Descripci√≥n:</strong>
        {{ couponManagementService.selectedCoupon.description }}
      </p>
      <hr />
      <strong>Tipo de Cup√≥n:</strong>
      {{ couponManagementService.selectedCoupon.type.description }}
      <hr />
      <div class="row no-gutters text-center">
        <div class="col-6">
          <p><strong>C√≥digo QR:</strong></p>
          <div class="w-100">
            <qrcode
              [qrdata]="couponManagementService.selectedCoupon.code"
              [size]="96"
              [level]="'M'"
            ></qrcode>
          </div>
          <p class="mb-0">{{ couponManagementService.selectedCoupon.code }}</p>
        </div>
        <div class="col-6">
          <p><strong>Imagen adjunta:</strong></p>
          <div class="w-100">
            <img
              [width]="96"
              [src]="couponManagementService.selectedCoupon.imageUrl"
            />
          </div>
        </div>
      </div>
      <hr />
      <div class="d-flex justify-content-between">
        <strong>V√°lida desde:</strong>
        {{
          couponManagementService.selectedCoupon.startsAt.format(
            "DD/MM/YYYY, hh:mm"
          )
        }}
      </div>
      <div class="d-flex justify-content-between">
        <strong>V√°lida hasta:</strong>
        {{
          couponManagementService.selectedCoupon.endsAt.format(
            "DD/MM/YYYY, HH:mm"
          )
        }}
      </div>
      <hr />
      <div>
        <div *ngIf="couponManagementService.selectedCoupon.audit">
          <strong>Agregado en:</strong>
          {{
            couponManagementService.selectedCoupon.audit.createdAt.format(
              "DD/MM/YYYY - HH:mm"
            )
          }}
        </div>
        <div *ngIf="couponManagementService.selectedCoupon.user">
          <strong>Agregado por:</strong>
          {{ couponManagementService.selectedCoupon.user.firstName }}
          {{ couponManagementService.selectedCoupon.user.lastName }} ({{
            couponManagementService.selectedCoupon.user.userName
          }})
        </div>
      </div>
    </ng-container>
  </div>
</div>
